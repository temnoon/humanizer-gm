/* ═══════════════════════════════════════════════════════════════════
   HARVEST PANEL STYLES
   Passage curation and bucket management interface
   Extracted from index.css during CSS modularization
   ═══════════════════════════════════════════════════════════════════ */

.harvest-panel {
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden;
}

.harvest-panel--empty {
  align-items: center;
  justify-content: center;
  text-align: center;
  color: var(--studio-text-muted, #666);
  padding: var(--space-lg, 1.5rem);
}

.harvest-panel__hint {
  font-size: 0.75rem;
  margin-top: 0.5rem;
  opacity: 0.7;
}

.harvest-panel__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.75rem 1rem;
  border-bottom: 1px solid var(--studio-border, #e5e2dc);
}

.harvest-panel__title {
  font-size: 0.875rem;
  font-weight: 600;
  margin: 0;
}

.harvest-panel__count {
  font-size: 0.75rem;
  color: var(--studio-text-muted, #666);
  background: var(--studio-bg-secondary, #f8f5f1);
  padding: 0.125rem 0.5rem;
  border-radius: 9999px;
}

.harvest-panel__buckets {
  flex: 1;
  overflow-y: auto;
  padding: 0.5rem;
}

/* Bucket container */
.harvest-bucket {
  margin-bottom: 0.5rem;
  border: 1px solid var(--studio-border, #e5e2dc);
  border-radius: 6px;
  background: var(--studio-bg-primary, #fff);
}

/* Bucket header */
.bucket-header {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 0.75rem;
  background: var(--studio-bg-secondary, #f8f5f1);
  border-radius: 5px 5px 0 0;
}

.bucket-header__toggle {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  background: none;
  border: none;
  padding: 0;
  cursor: pointer;
  font: inherit;
  color: inherit;
}

.bucket-header__icon {
  font-size: 0.625rem;
  opacity: 0.6;
}

.bucket-header__title {
  font-weight: 500;
  font-size: 0.8125rem;
}

.bucket-header__status {
  font-size: 0.625rem;
  padding: 0.125rem 0.375rem;
  border-radius: 9999px;
  text-transform: uppercase;
  font-weight: 500;
}

.bucket-header__status--collecting {
  background: #e3f2fd;
  color: #1976d2;
}

.bucket-header__status--reviewing {
  background: #fff3e0;
  color: #f57c00;
}

.bucket-header__status--staged {
  background: #e8f5e9;
  color: #388e3c;
}

.bucket-header__stats {
  display: flex;
  gap: 0.5rem;
  margin-left: auto;
}

.bucket-stat {
  font-size: 0.6875rem;
  color: var(--studio-text-muted, #666);
}

.bucket-stat--approved {
  color: #388e3c;
}

.bucket-stat--gems {
  color: #7b1fa2;
}

.bucket-header__progress {
  width: 100%;
  height: 4px;
  background: var(--studio-border, #e5e2dc);
  border-radius: 2px;
  overflow: hidden;
  position: relative;
  margin-top: 0.25rem;
}

.bucket-header__progress-bar {
  height: 100%;
  background: var(--studio-accent, #4a90d9);
  transition: width 0.3s ease;
}

.bucket-header__progress-text {
  position: absolute;
  right: 0;
  top: -1rem;
  font-size: 0.625rem;
  color: var(--studio-text-muted, #666);
}

.bucket-header__actions {
  display: flex;
  gap: 0.25rem;
}

.bucket-action {
  padding: 0.25rem 0.5rem;
  font-size: 0.6875rem;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.15s ease;
  min-height: 28px;
}

.bucket-action--stage {
  background: #e8f5e9;
  border: 1px solid #a5d6a7;
  color: #2e7d32;
}

.bucket-action--stage:hover {
  background: #c8e6c9;
}

.bucket-action--commit {
  background: var(--studio-accent, #4a90d9);
  border: 1px solid var(--studio-accent, #4a90d9);
  color: var(--studio-text);
}

.bucket-action--commit:hover {
  background: #3a80c9;
}

.bucket-action--discard {
  background: transparent;
  border: 1px solid var(--studio-border, #e5e2dc);
  color: var(--studio-text-muted, #666);
}

.bucket-action--discard:hover {
  border-color: #dc3545;
  color: #dc3545;
}

/* Harvest button */
.bucket-action--harvest {
  background: var(--color-info, #3b82f6);
  border: 1px solid var(--color-info, #3b82f6);
  color: var(--studio-text);
  font-weight: 500;
}

.bucket-action--harvest:hover:not(:disabled) {
  background: var(--color-info-dark, #2563eb);
}

.bucket-action--harvest:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* Query display in bucket header */
.bucket-header__queries {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.25rem 0.5rem;
  background: var(--studio-bg, #f8f8f6);
  border-radius: 4px;
  font-size: 0.6875rem;
  max-width: 200px;
  overflow: hidden;
}

.bucket-header__queries-label {
  flex-shrink: 0;
}

.bucket-header__queries-text {
  color: var(--studio-text-secondary, #666);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Error message */
.harvest-panel__error {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 0.75rem;
  margin: 0.5rem;
  background: var(--color-error-bg, #fef2f2);
  border: 1px solid var(--color-error-border, #fecaca);
  border-radius: 6px;
  font-size: 0.75rem;
  color: var(--color-error, #dc2626);
}

.harvest-panel__error-icon {
  flex-shrink: 0;
}

.harvest-panel__error-text {
  flex: 1;
}

.harvest-panel__error-dismiss {
  padding: 0.125rem 0.25rem;
  background: transparent;
  border: none;
  cursor: pointer;
  opacity: 0.6;
  color: inherit;
}

.harvest-panel__error-dismiss:hover {
  opacity: 1;
}

/* Dark mode for queries and error */
[data-theme='dark'] .bucket-header__queries {
  background: var(--color-surface-tertiary, #374151);
}

[data-theme='dark'] .bucket-header__queries-text {
  color: var(--color-text-secondary, #9ca3af);
}

[data-theme='dark'] .harvest-panel__error {
  background: rgba(220, 38, 38, 0.15);
  border-color: rgba(220, 38, 38, 0.3);
  color: #fca5a5;
}

[data-theme='dark'] .bucket-action--harvest {
  background: var(--color-info, #3b82f6);
  border-color: var(--color-info, #3b82f6);
}

/* Bucket content */
.harvest-bucket__content {
  border-top: 1px solid var(--studio-border, #e5e2dc);
}

.harvest-bucket__tabs {
  display: flex;
  border-bottom: 1px solid var(--studio-border, #e5e2dc);
}

.harvest-tab {
  flex: 1;
  padding: 0.5rem;
  font-size: 0.6875rem;
  background: none;
  border: none;
  cursor: pointer;
  color: var(--studio-text-muted, #666);
  transition: all 0.15s ease;
}

.harvest-tab:hover {
  background: var(--studio-bg-secondary, #f8f5f1);
}

.harvest-tab--active {
  color: var(--studio-accent, #4a90d9);
  border-bottom: 2px solid var(--studio-accent, #4a90d9);
  margin-bottom: -1px;
}

.harvest-bucket__passages {
  max-height: 300px;
  overflow-y: auto;
  padding: 0.5rem;
}

.harvest-empty {
  text-align: center;
  padding: 1rem;
  color: var(--studio-text-muted, #666);
  font-size: 0.75rem;
}

/* Passage card */
.harvest-card {
  display: flex;
  align-items: flex-start;
  gap: 0.5rem;
  padding: 0.5rem;
  margin-bottom: 0.5rem;
  border: 1px solid var(--studio-border, #e5e2dc);
  border-radius: 4px;
  background: var(--studio-bg-primary, #fff);
  cursor: pointer;
  transition: border-color 0.15s ease, box-shadow 0.15s ease;
}

.harvest-card:hover {
  border-color: var(--studio-accent, #4a90d9);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
}

.harvest-card--gem {
  border-left: 3px solid #7b1fa2;
  background: #faf5fc;
}

.harvest-card--approved {
  border-left: 3px solid #388e3c;
  background: #f6fbf6;
}

.harvest-card--rejected {
  border-left: 3px solid #dc3545;
  background: #fdf6f6;
  opacity: 0.7;
}

.harvest-card__content {
  flex: 1;
  min-width: 0;
}

.harvest-card__source {
  font-size: 0.625rem;
  color: var(--studio-text-muted, #666);
  margin-bottom: 0.25rem;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.harvest-card__text {
  font-size: 0.75rem;
  line-height: 1.4;
  color: var(--studio-text-primary, #1a1a1a);
}

/* DEBT-003 FIX: Error display for load failures */
.harvest-card__error {
  font-size: 0.625rem;
  color: var(--color-error, #dc3545);
  background: rgba(220, 53, 69, 0.1);
  padding: 0.375rem 0.5rem;
  border-radius: 4px;
  margin-top: 0.25rem;
  border-left: 2px solid var(--color-error, #dc3545);
}

[data-theme='dark'] .harvest-card__error {
  background: rgba(220, 53, 69, 0.15);
  color: #f87171;
}

.harvest-card__meta {
  font-size: 0.625rem;
  color: var(--studio-text-muted, #666);
  margin-top: 0.25rem;
}

/* Expanded card state */
.harvest-card--expanded {
  max-height: none;
}

/* Card header with source and link */
.harvest-card__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.25rem;
}

.harvest-card__source-link {
  font-size: 0.625rem;
  color: var(--color-primary, #3b82f6);
  background: none;
  border: none;
  cursor: pointer;
  padding: 0.125rem 0.25rem;
  border-radius: 3px;
  white-space: nowrap;
  flex-shrink: 0;
}

.harvest-card__source-link:hover {
  background: var(--color-primary-light, rgba(59, 130, 246, 0.1));
  text-decoration: underline;
}

/* Full text display */
.harvest-card__text--full {
  white-space: pre-wrap;
  word-break: break-word;
}

/* Expand/collapse button */
.harvest-card__expand {
  font-size: 0.625rem;
  color: var(--color-primary, #3b82f6);
  background: none;
  border: none;
  cursor: pointer;
  padding: 0.25rem 0;
  margin-top: 0.25rem;
  display: block;
  width: 100%;
  text-align: left;
}

.harvest-card__expand:hover {
  text-decoration: underline;
}

/* Dark mode for new elements */
[data-theme='dark'] .harvest-card__source-link {
  color: var(--color-primary-light, #60a5fa);
}

[data-theme='dark'] .harvest-card__expand {
  color: var(--color-primary-light, #60a5fa);
}

.harvest-card__review-btn {
  font-size: 0.625rem;
  color: var(--color-success, #10b981);
  background: none;
  border: none;
  cursor: pointer;
  padding: 0.125rem 0.25rem;
  margin-left: 0.25rem;
  border-radius: 3px;
  transition: all 0.15s ease;
}

.harvest-card__review-btn:hover {
  background: rgba(16, 185, 129, 0.1);
  color: var(--color-success-hover, #059669);
}

[data-theme='dark'] .harvest-card__review-btn {
  color: var(--color-success-light, #34d399);
}

[data-theme='dark'] .harvest-card__review-btn:hover {
  background: rgba(52, 211, 153, 0.15);
}

.harvest-card__actions {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.harvest-btn {
  width: 32px;
  height: 32px;
  min-height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 4px;
  border: 1px solid var(--studio-border, #e5e2dc);
  background: var(--studio-bg-primary, #fff);
  cursor: pointer;
  font-size: 0.875rem;
  transition: all 0.15s ease;
}

.harvest-btn:hover {
  transform: scale(1.05);
}

.harvest-btn--gem:hover {
  border-color: #7b1fa2;
  background: #faf5fc;
}

.harvest-btn--approve:hover {
  border-color: #388e3c;
  background: #e8f5e9;
}

.harvest-btn--reject:hover {
  border-color: #dc3545;
  background: #ffebee;
}

.harvest-btn--undo:hover {
  border-color: var(--studio-accent, #4a90d9);
  background: #e3f2fd;
}

/* ═══════════════════════════════════════════════════════════════════
   DARK MODE OVERRIDES
   Ensures all harvest components work properly in dark theme
   ═══════════════════════════════════════════════════════════════════ */

[data-theme='dark'] .harvest-panel--empty {
  color: var(--studio-text-secondary, #a0a0b0);
}

[data-theme='dark'] .harvest-panel__header {
  border-bottom-color: var(--studio-border, #2a2a38);
}

[data-theme='dark'] .harvest-panel__count {
  background: var(--studio-surface, #1a1a24);
  color: var(--studio-text-secondary, #a0a0b0);
}

/* Bucket container */
[data-theme='dark'] .harvest-bucket {
  background: var(--studio-surface, #1a1a24);
  border-color: var(--studio-border, #2a2a38);
}

/* Bucket header */
[data-theme='dark'] .bucket-header {
  background: var(--color-surface-secondary, hsl(220, 12%, 14%));
}

[data-theme='dark'] .bucket-stat {
  color: var(--studio-text-secondary, #a0a0b0);
}

/* Status badges - themed for dark mode */
[data-theme='dark'] .bucket-header__status--collecting {
  background: rgba(59, 130, 246, 0.2);
  color: #60a5fa;
}

[data-theme='dark'] .bucket-header__status--reviewing {
  background: rgba(245, 158, 11, 0.2);
  color: #fbbf24;
}

[data-theme='dark'] .bucket-header__status--staged {
  background: rgba(34, 197, 94, 0.2);
  color: #4ade80;
}

/* Bucket actions */
[data-theme='dark'] .bucket-action--stage {
  background: rgba(34, 197, 94, 0.15);
  border-color: rgba(34, 197, 94, 0.4);
  color: #4ade80;
}

[data-theme='dark'] .bucket-action--stage:hover {
  background: rgba(34, 197, 94, 0.25);
}

[data-theme='dark'] .bucket-action--commit {
  background: var(--studio-accent, #60a5fa);
  border-color: var(--studio-accent, #60a5fa);
  color: var(--color-text-inverse, white);
}

[data-theme='dark'] .bucket-action--commit:hover {
  background: var(--studio-accent-hover, #93c5fd);
}

[data-theme='dark'] .bucket-action--discard {
  background: transparent;
  border-color: var(--studio-border, #2a2a38);
  color: var(--studio-text-secondary, #a0a0b0);
}

[data-theme='dark'] .bucket-action--discard:hover {
  border-color: #f87171;
  color: #f87171;
}

/* Progress bar */
[data-theme='dark'] .bucket-header__progress {
  background: var(--color-surface-tertiary, hsl(220, 10%, 18%));
}

[data-theme='dark'] .bucket-header__progress-text {
  color: var(--studio-text-secondary, #a0a0b0);
}

/* Bucket content */
[data-theme='dark'] .harvest-bucket__content {
  border-top-color: var(--studio-border, #2a2a38);
}

[data-theme='dark'] .harvest-bucket__tabs {
  border-bottom-color: var(--studio-border, #2a2a38);
}

/* Harvest tabs */
[data-theme='dark'] .harvest-tab {
  color: var(--studio-text-secondary, #a0a0b0);
}

[data-theme='dark'] .harvest-tab:hover {
  background: var(--color-surface-tertiary, hsl(220, 10%, 18%));
}

[data-theme='dark'] .harvest-tab--active {
  color: var(--studio-accent, #60a5fa);
  border-bottom-color: var(--studio-accent, #60a5fa);
}

[data-theme='dark'] .harvest-empty {
  color: var(--studio-text-secondary, #a0a0b0);
}

/* Harvest cards */
[data-theme='dark'] .harvest-card {
  background: var(--color-surface-secondary, hsl(220, 12%, 14%));
  border-color: var(--studio-border, #2a2a38);
}

[data-theme='dark'] .harvest-card:hover {
  border-color: var(--studio-accent, #60a5fa);
}

[data-theme='dark'] .harvest-card--gem {
  border-left-color: #c084fc;
  background: linear-gradient(135deg, rgba(192, 132, 252, 0.1) 0%, var(--color-surface-secondary) 50%);
}

[data-theme='dark'] .harvest-card--approved {
  border-left-color: #4ade80;
  background: linear-gradient(135deg, rgba(74, 222, 128, 0.08) 0%, var(--color-surface-secondary) 50%);
}

[data-theme='dark'] .harvest-card--rejected {
  border-left-color: #f87171;
  background: linear-gradient(135deg, rgba(248, 113, 113, 0.08) 0%, var(--color-surface-secondary) 50%);
}

[data-theme='dark'] .harvest-card__source {
  color: var(--studio-text-tertiary, #6b6b7a);
}

[data-theme='dark'] .harvest-card__text {
  color: var(--studio-text, #e8e8ed);
}

[data-theme='dark'] .harvest-card__meta {
  color: var(--studio-text-tertiary, #6b6b7a);
}

/* Harvest action buttons */
[data-theme='dark'] .harvest-btn {
  background: var(--color-surface-tertiary, hsl(220, 10%, 18%));
  border-color: var(--studio-border, #2a2a38);
}

[data-theme='dark'] .harvest-btn--gem:hover {
  border-color: #c084fc;
  background: rgba(192, 132, 252, 0.15);
}

[data-theme='dark'] .harvest-btn--approve:hover {
  border-color: #4ade80;
  background: rgba(74, 222, 128, 0.15);
}

[data-theme='dark'] .harvest-btn--reject:hover {
  border-color: #f87171;
  background: rgba(248, 113, 113, 0.15);
}

[data-theme='dark'] .harvest-btn--undo:hover {
  border-color: var(--studio-accent, #60a5fa);
  background: rgba(96, 165, 250, 0.15);
}

/* Stat colors for dark mode */
[data-theme='dark'] .bucket-stat--approved {
  color: #4ade80;
}

[data-theme='dark'] .bucket-stat--gems {
  color: #c084fc;
}

/* ═══════════════════════════════════════════════════════════════════
   THUMBNAIL SUPPORT FOR VISUAL PASSAGES
   Display thumbnails for passages with associated images
   ═══════════════════════════════════════════════════════════════════ */

/* Card with media has thumbnail on left */
.harvest-card--has-media {
  display: flex;
  gap: 0.75rem;
}

/* Thumbnail container */
.harvest-card__thumbnail {
  flex-shrink: 0;
  width: 80px;
  height: 80px;
  border-radius: 6px;
  overflow: hidden;
  position: relative;
  background: var(--studio-bg-secondary, #f8f5f1);
  border: 1px solid var(--studio-border, #e5e2dc);
}

.harvest-card__thumbnail-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* Image count badge (shows +N when multiple images) */
.harvest-card__image-count {
  position: absolute;
  bottom: 4px;
  right: 4px;
  background: rgba(0, 0, 0, 0.7);
  color: #fff;
  font-size: 0.5625rem;
  padding: 2px 4px;
  border-radius: 3px;
  font-weight: 500;
}

/* Dark mode thumbnail */
[data-theme='dark'] .harvest-card__thumbnail {
  background: var(--color-surface-tertiary, hsl(220, 10%, 18%));
  border-color: var(--studio-border, #2a2a38);
}

[data-theme='dark'] .harvest-card__image-count {
  background: rgba(0, 0, 0, 0.85);
}

